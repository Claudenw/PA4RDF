<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at Feb 21, 2015 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Persistence Annotations 4 RDF - Usage Strategies</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20150221" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Persistence Annotations 4 RDF
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
            
                <div class="xleft">
        <span id="publishDate">Last Published: 2015-02-21</span>
                  &nbsp;| <span id="projectVersion">Version: 1.3</span>
                      </div>
            <div class="xright">        
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
            
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="annotations.html" title="Annotations">Annotations</a>
            </li>
                  <li class="none">
            <strong>Usage Strategies</strong>
          </li>
                  <li class="none">
                          <a href="dataTypes.html" title="Data Types">Data Types</a>
            </li>
                  <li class="none">
                          <a href="examples/index.html" title="Code Example">Code Example</a>
            </li>
                  <li class="none">
                          <a href="project-info.html" title="Project Info">Project Info</a>
            </li>
          </ul>
                       <h5>Java Docs</h5>
                  <ul>
                  <li class="none">
                          <a href="apidocs/index.html" title="Source">Source</a>
            </li>
                  <li class="none">
                          <a href="testapidocs/index.html" title="Test Code">Test Code</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
            
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <h1>Usage Strategies</h1><p>PA4RDF was originally intended to annotate an interface that defined the Java access to the underlying properties of a subject. The overarching goal was to read and write the data directly into the graph without copying in and out of java objects. This goal removes the synchronization issues found in most persistence frameworks.</p><p>However as larger projects were developed, using interfaces became unwieldly and additions were made to allow concrete implementations to be overridden by the PA4RDF functionality. </p><h1>Interface And Abstract Class Annotations</h1><p>The original usage for PA4DRF was to annotate an interface and the use the dynamic proxy to produce a concrete implementation of the interface. This strategy works equally well with interfaces and abstract classes. However once the abstract class become too complex it becomes difficult to maintain the code and the logic.</p><p>When annotating interfaces and abstract classes the @Subject annotation must be used to identify that the interface/class is to be handled by the PA4RDF entity manager. </p><p>Any method that should be handled by the EntityManger should be annotated with a @Predicate annotation with the following exceptions:</p>
<ul>
  <li><p>Annotating a getter (e.g. getX or isX) method will automatically include the setters (i.e. setX or addX, and removeX) and the existential method hasX.</p></li>
  <li><p>Annotating a getter that return an RDFNode type will automatically include the setters, and existential methods that have @URI annotated parameters.</p></li>
  <li><p>Annotating a setter (e.g. addX or setX) method will automatically include the getter (i.e. getX), removeX and the existential method hasX.</p></li>
  <li><p>Annotating a setter that accepts an RDFNode type will automatically include the setters, getters, and existential methods that have @URI annotated parameters.</p></li>
  <li><p>Annotating a setter that accepts a String parameter that is annotated with @URI will automatically include the setters, getters, and existential methods that have RDFNode parameters.</p></li>
</ul><p>Methods are processed in groups based on whether methods are single or multiValue.</p><p>Single value methods are:</p>
<ul>
  <li><p>valueClass getX()  where the valueClass is not an ExtendedIterator or Collection class.</p></li>
  <li><p>boolean isX()  where the valueClass is a boolean.</p></li>
  <li><p>void setX( valueClass )</p></li>
  <li><p>boolean hasX()</p></li>
  <li><p>void removeX()</p></li>
</ul><p>Multivalue methods are:</p>
<ul>
  <li><p>ExtendedIterator&lt;valueClass&gt; getX()</p></li>
  <li><p>Colllection&lt;valueClass&gt; getX()</p></li>
  <li><p>void addX( valueClass )</p></li>
  <li><p>boolean hasX( valueClass )</p></li>
  <li><p>void removeX( valueClass )</p></li>
</ul><p>If a getter or setter for a group is annotated with @Predicate all other members of the group will be processed as if they were annotated as well.</p><h1>Concrete Class Annotations</h1><p>A concrete class may extend an annotated interface or abstract class, these classes must not have the @Subject annotation. The overridden methods must be annotated with @Predicate( impl=true ) annotations. Methods that are annotated in this way should be written as follows so that if the class is used without being loaded by the entity manager an exception will be thrown:</p>
<div class="source"><pre>@Override
@Predicate( impl = true )
public String getX()
{
    throw new EntityManagerRequiredException();
}
</pre></div><p>This strategy allows for the creation of concrete classes that still retrieve data from the graph as expected for interface and abstract classes. </p><p>A concrete class be annotated with @Subject. In this case all methods that are to be intercepted must be annotated with full @Predicate annotations as would be used in an interface and must include the impl=true setting as shown below:</p>
<div class="source"><pre>@Predicate( impl = true )
public String getX()
{
    throw new EntityManagerRequiredException();
}  
</pre></div><p>As with the above, this strategy will throw an exception if the method is not used within a entity manager. </p><h1>Future Directions</h1><p>There is a plan to add a concrete annotation that works more like the standard JPA annotations in that values will be loaded into the java object. However, this will be done utilizing graph listeners and that will automatically update the data in the object when the data in the graph changes. To facilitate this all setters will be intercepted by the entity manager and the data will be updated in the graph. The object will listen for changes in the graph and will update the local version of the data when those changes are discovered. Getters will access the local version of the data.</p>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2012-2015
                      XENEI.org.
            All Rights Reserved.      
            
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
